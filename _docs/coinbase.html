<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.450">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>token_style - Coinbase</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" integrity="sha512-c3Nl8+7g4LMSTdrm621y7kf9v3SDPnhxLNhcjFJbKECVnmZHTdo+IRO05sNLTH/D3vA6u1X32ehoLC7WFVdheg==" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js" integrity="sha512-bLT0Qm9VnAYZDflyKcBaQ2gg0hSYNQrJ8RilYldYQ1FxQYoCLtUjuuRuZo+fjqhx/qtq/1itJ0C2ejDxltZVFg==" crossorigin="anonymous"></script>
<script type="application/javascript">define('jquery', [],function() {return window.jQuery;})</script>


<link rel="stylesheet" href="styles.css">
<meta property="og:title" content="token_style - Coinbase">
<meta property="og:description" content="">
<meta property="og:site-name" content="token_style">
<meta name="twitter:title" content="token_style - Coinbase">
<meta name="twitter:description" content="">
<meta name="twitter:card" content="summary">
</head>

<body class="nav-sidebar floating nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="./index.html">
    <span class="navbar-title">token_style</span>
    </a>
  </div>
        <div class="quarto-navbar-tools ms-auto">
</div>
          <div id="quarto-search" class="" title="Search"></div>
      </div> <!-- /container-fluid -->
    </nav>
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
      <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./coinbase.html">Coinbase</a></li></ol></nav>
      <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
      </a>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal sidebar-navigation floating overflow-auto">
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">token_style</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./core.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">core</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./coinbase.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text">Coinbase</span></a>
  </div>
</li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#retrieve_coinbase_price" id="toc-retrieve_coinbase_price" class="nav-link active" data-scroll-target="#retrieve_coinbase_price">retrieve_coinbase_price</a></li>
  <li><a href="#coinbase_tokens" id="toc-coinbase_tokens" class="nav-link" data-scroll-target="#coinbase_tokens">coinbase_tokens</a></li>
  <li><a href="#coinbase_usd_tokens" id="toc-coinbase_usd_tokens" class="nav-link" data-scroll-target="#coinbase_usd_tokens">coinbase_usd_tokens</a></li>
  <li><a href="#coinbase_price_history" id="toc-coinbase_price_history" class="nav-link" data-scroll-target="#coinbase_price_history">coinbase_price_history</a></li>
  <li><a href="#save_file" id="toc-save_file" class="nav-link" data-scroll-target="#save_file">save_file</a></li>
  <li><a href="#coinbase_to_file" id="toc-coinbase_to_file" class="nav-link" data-scroll-target="#coinbase_to_file">coinbase_to_file</a></li>
  <li><a href="#coinbase_data_update" id="toc-coinbase_data_update" class="nav-link" data-scroll-target="#coinbase_data_update">coinbase_data_update</a></li>
  <li><a href="#read_all_files" id="toc-read_all_files" class="nav-link" data-scroll-target="#read_all_files">read_all_files</a></li>
  <li><a href="#coinbase_price_last_day" id="toc-coinbase_price_last_day" class="nav-link" data-scroll-target="#coinbase_price_last_day">coinbase_price_last_day</a></li>
  <li><a href="#binance_format" id="toc-binance_format" class="nav-link" data-scroll-target="#binance_format">binance_format</a></li>
  <li><a href="#examples" id="toc-examples" class="nav-link" data-scroll-target="#examples">Examples</a></li>
  </ul>
<div class="toc-actions"><div><i class="bi bi-github"></i></div><div class="action-links"><p><a href="https://github.com/silvaac/token_style/issues/new" class="toc-action">Report an issue</a></p></div></div><div class="quarto-alternate-formats"><h2>Other Formats</h2><ul><li><a href="coinbase.md"><i class="bi bi-file-code"></i>CommonMark</a></li></ul></div></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Coinbase</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<!-- WARNING: THIS FILE WAS AUTOGENERATED! DO NOT EDIT! -->
<p>Manages the coinbase data download and processing. It is important to note that the Coinbase API might change from time to time, and the functions might need to be updated. You can find the documentation here: https://docs.cdp.coinbase.com/exchange/reference/exchangerestapi_getproductcandles.</p>
<p>Notice also that there are limits of what one can download. See the documentation for more details. In particular: https://docs.cdp.coinbase.com/exchange/docs/rest-rate-limits</p>
<p>** Finally, datetime columns are in UTC. **</p>
<hr>
<p><a href="https://github.com/silvaac/token_style/blob/main/token_style/coinbase.py#L16" target="_blank" style="float:right; font-size:smaller">source</a></p>
<section id="retrieve_coinbase_price" class="level3">
<h3 class="anchored" data-anchor-id="retrieve_coinbase_price">retrieve_coinbase_price</h3>
<blockquote class="blockquote">
<pre><code> retrieve_coinbase_price (pair='BTC-USD', time_interval=3600,
                          end_date='2025-01-08T14:25:19Z',
                          start_date='2025-01-06T14:25:19Z')</code></pre>
</blockquote>
<p>*Retrieves historical price data from Coinbase for a given trading pair and time interval.</p>
<p>Makes a GET request to the Coinbase candles endpoint to fetch OHLCV (Open, High, Low, Close, Volume) data for the specified trading pair and time period.</p>
<p>Args: pair (str, optional): Trading pair symbol (e.g.&nbsp;“BTC-USD”). Defaults to “BTC-USD”. time_interval (int, optional): Candle interval in seconds. Defaults to 3600 (1 hour). end_date (str, optional): End datetime in ISO 8601 format. Defaults to current UTC time. start_date (str, optional): Start datetime in ISO 8601 format. Defaults to 2 days before end_date.</p>
<p>Returns: pandas.DataFrame: DataFrame containing the OHLCV data with columns: - datetime: Timestamp for the candle (UTC) - low: Lowest traded price in the interval - high: Highest traded price in the interval<br>
- open: Opening price of the interval - close: Closing price of the interval - volume: Trading volume in the interval - pair: Trading pair symbol Returns None if the API request fails or returns no data.</p>
<p>Notes: - Limited to 300 requests per hour by the Coinbase API - Maximum of 200 candles can be retrieved per request - Attempting to exceed these limits will result in an error and return None - All datetime values are in UTC timezone*</p>
<hr>
<p><a href="https://github.com/silvaac/token_style/blob/main/token_style/coinbase.py#L68" target="_blank" style="float:right; font-size:smaller">source</a></p>
</section>
<section id="coinbase_tokens" class="level3">
<h3 class="anchored" data-anchor-id="coinbase_tokens">coinbase_tokens</h3>
<blockquote class="blockquote">
<pre><code> coinbase_tokens ()</code></pre>
</blockquote>
<p>*Retrieves all available trading pairs from the Coinbase Exchange API.</p>
<p>Makes a GET request to the Coinbase products endpoint to fetch information about all trading pairs available on the exchange.</p>
<p>Returns: pandas.DataFrame: DataFrame containing information about all trading pairs with columns: - id: Trading pair ID (e.g.&nbsp;‘BTC-USD’) - base_currency: The cryptocurrency being traded (e.g.&nbsp;‘BTC’) - quote_currency: The currency used for pricing (e.g.&nbsp;‘USD’) - quote_increment: Minimum price increment - base_increment: Minimum quantity increment - display_name: Human readable name of the trading pair - status: Trading status of the pair And other metadata columns provided by the Coinbase API*</p>
<hr>
<p><a href="https://github.com/silvaac/token_style/blob/main/token_style/coinbase.py#L93" target="_blank" style="float:right; font-size:smaller">source</a></p>
</section>
<section id="coinbase_usd_tokens" class="level3">
<h3 class="anchored" data-anchor-id="coinbase_usd_tokens">coinbase_usd_tokens</h3>
<blockquote class="blockquote">
<pre><code> coinbase_usd_tokens ()</code></pre>
</blockquote>
<p>*Retrieves all trading pairs from Coinbase that have USD as the quote currency.</p>
<p>Returns: pandas.DataFrame: DataFrame containing information about USD trading pairs with columns: - id: Trading pair ID (e.g.&nbsp;‘BTC-USD’) - base_currency: The cryptocurrency being traded (e.g.&nbsp;‘BTC’) - quote_currency: Always ‘USD’ for this filtered dataset - quote_increment: Minimum price increment - base_increment: Minimum quantity increment - display_name: Human readable name of the trading pair - status: Trading status of the pair And other metadata columns provided by the Coinbase API*</p>
<hr>
<p><a href="https://github.com/silvaac/token_style/blob/main/token_style/coinbase.py#L113" target="_blank" style="float:right; font-size:smaller">source</a></p>
</section>
<section id="coinbase_price_history" class="level3">
<h3 class="anchored" data-anchor-id="coinbase_price_history">coinbase_price_history</h3>
<blockquote class="blockquote">
<pre><code> coinbase_price_history (pair='BTC-USD', start_date='2024-01-01',
                         end_date='2024-05-01', time_interval=3600,
                         max_pull=250, verbose=False)</code></pre>
</blockquote>
<p>*Downloads historical price data for a cryptocurrency pair from Coinbase, handling rate limits.</p>
<p>Args: pair (str): Trading pair symbol (e.g.&nbsp;‘BTC-USD’). Defaults to ‘BTC-USD’. start_date (str): Start date in ‘YYYY-MM-DD’ format. Defaults to ‘2024-01-01’. end_date (str): End date in ‘YYYY-MM-DD’ format. Defaults to ‘2024-05-01’. time_interval (int): Time interval between candles in seconds. Defaults to 3600 (1 hour). max_pull (int): Maximum number of candles per API request. Defaults to 250. verbose (bool): If True, prints progress messages. Defaults to False.</p>
<p>Returns: pandas.DataFrame: DataFrame containing price history with columns: - datetime: Timestamp of the candle - low: Lowest price during the interval - high: Highest price during the interval<br>
- open: Opening price of the interval - close: Closing price of the interval - volume: Trading volume during the interval - pair: Trading pair symbol</p>
<p>Raises: ValueError: If end_date is earlier than start_date</p>
<p>The function handles Coinbase’s API limitations by automatically splitting requests into smaller chunks if the date range would exceed the maximum allowed candles per request.*</p>
<hr>
<p><a href="https://github.com/silvaac/token_style/blob/main/token_style/coinbase.py#L171" target="_blank" style="float:right; font-size:smaller">source</a></p>
</section>
<section id="save_file" class="level3">
<h3 class="anchored" data-anchor-id="save_file">save_file</h3>
<blockquote class="blockquote">
<pre><code> save_file (df, folder_path, file_name, type='csv')</code></pre>
</blockquote>
<p>*Save a pandas DataFrame to a file in either CSV or Parquet format.</p>
<p>Args: df (pandas.DataFrame): The DataFrame to save folder_path (str): Directory path where the file will be saved file_name (str): Name of the file without extension type (str, optional): File format - either “csv” or “parquet”. Defaults to “csv”</p>
<p>The function saves the DataFrame to the specified path, handling the file extension automatically. For CSV files, the index is not saved. For Parquet files, default Parquet settings are used.*</p>
<hr>
<p><a href="https://github.com/silvaac/token_style/blob/main/token_style/coinbase.py#L192" target="_blank" style="float:right; font-size:smaller">source</a></p>
</section>
<section id="coinbase_to_file" class="level3">
<h3 class="anchored" data-anchor-id="coinbase_to_file">coinbase_to_file</h3>
<blockquote class="blockquote">
<pre><code> coinbase_to_file (folder_path='../data/coinbase', token_list=['ENJ-USD',
                   'HNT-USD', 'AUCTION-USD', 'QUICK-USD', 'ZRO-USD',
                   'SUPER-USD', 'RLY-USD', 'VOXEL-USD', 'MNDE-USD', 'DAR-
                   USD', 'CRPT-USD', 'WLUNA-USD', 'SD-USD', 'EGLD-USD',
                   'SWFTC-USD', 'OSMO-USD', 'CGLD-USD', 'PRCL-USD', 'EURC-
                   USD', 'ATOM-USD', 'CRO-USD', 'CORECHAIN-USD', 'PYR-
                   USD', 'MTL-USD', 'HONEY-USD', 'PRQ-USD', 'DDX-USD',
                   'CVX-USD', 'WAXL-USD', 'TRU-USD', 'BUSD-USD', 'UMA-
                   USD', 'BLAST-USD', 'GAL-USD', 'SPA-USD', 'WBTC-USD',
                   'RBN-USD', 'QSP-USD', 'FET-USD', 'ENS-USD', 'IDEX-USD',
                   'AERGO-USD', 'UST-USD', 'ETH-USD', 'VET-USD', 'XTZ-
                   USD', 'XLM-USD', 'GFI-USD', 'FLOKI-USD', 'COVAL-USD',
                   'DESO-USD', 'VELO-USD', 'TRAC-USD', 'KSM-USD', 'FARM-
                   USD', 'RAI-USD', 'MUSE-USD', 'SYLO-USD', 'LINK-USD',
                   'CLV-USD', 'PUNDIX-USD', 'MXC-USD', 'MIR-USD', 'IMX-
                   USD', 'PAX-USD', 'JTO-USD', '1INCH-USD', 'WAMPL-USD',
                   'FIS-USD', 'BOBA-USD', 'FLR-USD', 'PRO-USD', 'FX-USD',
                   'OMNI-USD', 'CTX-USD', 'DEXT-USD', 'BTRST-USD', 'SNT-
                   USD', 'ILV-USD', 'TIA-USD', 'QI-USD', 'DOT-USD', 'ONDO-
                   USD', 'ORCA-USD', 'INDEX-USD', 'SYN-USD', 'AUDIO-USD',
                   'BTC-USD', 'GODS-USD', 'ALGO-USD', 'ZETA-USD', 'ACS-
                   USD', 'OGN-USD', 'KARRAT-USD', 'AERO-USD', 'MOODENG-
                   USD', 'GRT-USD', 'GALA-USD', 'TVK-USD', 'SUKU-USD',
                   'COMP-USD', 'NKN-USD', 'LRDS-USD', 'T-USD', 'STORJ-
                   USD', 'XYO-USD', 'LCX-USD', 'NEON-USD', 'INJ-USD',
                   'CHZ-USD', 'ALCX-USD', 'DEGEN-USD', 'YFI-USD', 'TRB-
                   USD', 'STX-USD', 'ALEPH-USD', 'LQTY-USD', 'MEDIA-USD',
                   'PIRATE-USD', 'MOBILE-USD', 'A8-USD', 'WELL-USD',
                   'BIGTIME-USD', 'GNO-USD', 'RENDER-USD', 'ICP-USD',
                   'MINA-USD', 'OMG-USD', 'AXL-USD', 'ERN-USD', 'ADA-USD',
                   'HFT-USD', 'LOOM-USD', 'ETC-USD', 'KNC-USD', 'MUSD-
                   USD', 'ROSE-USD', 'AXS-USD', 'PNG-USD', 'WIF-USD',
                   'ATA-USD', 'BAL-USD', 'FIDA-USD', 'OXT-USD', 'GYEN-
                   USD', 'SKL-USD', 'BADGER-USD', 'SHIB-USD', 'CTSI-USD',
                   'DYP-USD', 'FORT-USD', 'TRIBE-USD', 'OOKI-USD', 'RARE-
                   USD', 'INV-USD', 'BIT-USD', 'GLM-USD', 'IOTX-USD',
                   'SWELL-USD', 'ME-USD', 'CBETH-USD', 'VGX-USD', 'PEPE-
                   USD', 'MLN-USD', 'LRC-USD', 'ASM-USD', 'AGLD-USD',
                   'UNI-USD', 'JASMY-USD', 'LSETH-USD', 'AAVE-USD', 'AVAX-
                   USD', 'MPL-USD', 'MDT-USD', 'SNX-USD', 'OP-USD', 'ARKM-
                   USD', 'CVC-USD', 'MCO2-USD', 'FLOW-USD', 'ZEN-USD',
                   'PLA-USD', 'BNT-USD', 'HBAR-USD', 'C98-USD', 'YFII-
                   USD', 'STG-USD', 'POL-USD', 'COW-USD', 'REQ-USD', 'ZK-
                   USD', 'DRIFT-USD', 'DASH-USD', 'SUI-USD', 'CRV-USD',
                   'VTHO-USD', 'GIGA-USD', 'DAI-USD', 'SHPING-USD',
                   'SPELL-USD', 'GMT-USD', 'ANKR-USD', 'GTC-USD', 'KRL-
                   USD', 'SAND-USD', 'XRP-USD', 'TURBO-USD', 'LOKA-USD',
                   'KAVA-USD', 'MONA-USD', 'COTI-USD', 'DOGE-USD', 'DIMO-
                   USD', 'PLU-USD', 'RLC-USD', 'BLZ-USD', 'UNFI-USD',
                   'API3-USD', 'MASK-USD', 'HIGH-USD', 'REN-USD', 'BONK-
                   USD', 'MOG-USD', 'PYUSD-USD', 'POLY-USD', 'ELA-USD',
                   'GST-USD', 'AMP-USD', 'FOX-USD', 'LTC-USD', '00-USD',
                   'RAD-USD', 'RNDR-USD', 'ARPA-USD', 'ABT-USD', 'NU-USD',
                   'TIME-USD', 'PERP-USD', 'AKT-USD', 'DIA-USD', 'AVT-
                   USD', 'TONE-USD', 'NEST-USD', 'SEAM-USD', 'BOND-USD',
                   'APT-USD', 'RPL-USD', 'ANT-USD', 'BLUR-USD', 'GHST-
                   USD', 'WCFG-USD', 'MANA-USD', 'SHDW-USD', 'FIL-USD',
                   'QNT-USD', 'SAFE-USD', 'VARA-USD', 'NEAR-USD', 'ARB-
                   USD', 'CELR-USD', 'MOVE-USD', 'LDO-USD', 'RGT-USD',
                   'SEI-USD', 'DREP-USD', 'MATH-USD', 'MSOL-USD', 'AST-
                   USD', 'BAND-USD', 'XCN-USD', 'BICO-USD', 'ACX-USD',
                   'METIS-USD', 'RARI-USD', 'ALEO-USD', 'GUSD-USD', 'LPT-
                   USD', 'IO-USD', 'JUP-USD', 'APE-USD', 'UPI-USD', 'ZEC-
                   USD', 'MULTI-USD', 'ALICE-USD', 'NCT-USD', 'BCH-USD',
                   'DNT-USD', 'ZRX-USD', 'MKR-USD', 'STRK-USD', 'TNSR-
                   USD', 'MAGIC-USD', 'MATIC-USD', 'POWR-USD', 'POND-USD',
                   'EOS-USD', 'PRIME-USD', 'HOPR-USD', 'SOL-USD', 'SUSHI-
                   USD', 'NMR-USD', 'USDT-USD', 'AIOZ-USD', 'POLS-USD',
                   'OCEAN-USD', 'KEEP-USD', 'ZETACHAIN-USD', 'G-USD',
                   'AURORA-USD', 'BAT-USD', 'REP-USD', 'ACH-USD', 'RONIN-
                   USD', 'ORN-USD', 'LIT-USD', 'EIGEN-USD', 'FORTH-USD'],
                   type='csv', interval=3600, all_tokens=True,
                   refresh_24h=False)</code></pre>
</blockquote>
<p>*Downloads and maintains historical price data for Coinbase tokens, saving to files.</p>
<p>Args: folder_path (str): Path where token data files will be stored. Defaults to “../data/coinbase” token_list (list): List of token IDs to process. Defaults to all USD trading pairs from coinbase_usd_tokens() type (str): File format to save data - either “csv” or “parquet”. Defaults to “csv” interval (int): Time interval in seconds between price points. Defaults to 3600 (1 hour) all_tokens (bool): If True, includes any additional tokens found in the folder path. Defaults to True refresh_24h (bool): If True, replaces at least 24 hours. Defaults to False</p>
<p>The function: - Creates the folder_path if it doesn’t exist - Date/Time is UTC - For each token, checks if data file exists: - If exists: Loads file and appends any new data since last recorded date - If not exists: Downloads full history starting from 2016 - Saves data in specified format, handling duplicates and sorting by date - For hourly data (interval=3600), aligns to hour boundaries*</p>
<hr>
<p><a href="https://github.com/silvaac/token_style/blob/main/token_style/coinbase.py#L266" target="_blank" style="float:right; font-size:smaller">source</a></p>
</section>
<section id="coinbase_data_update" class="level3">
<h3 class="anchored" data-anchor-id="coinbase_data_update">coinbase_data_update</h3>
<blockquote class="blockquote">
<pre><code> coinbase_data_update (folder_path='../data/coinbase', token_list=['AAVE-
                       USD'], type='parquet', interval=3600,
                       refresh_24h=True)</code></pre>
</blockquote>
<p>*Downloads new historical price data for Coinbase tokens… no saving</p>
<p>Args: folder_path (str): Path where token data files will be stored. Defaults to “../data/coinbase” token_list (list): List of token IDs to process type (str): File format to save data - either “csv” or “parquet”. Defaults to “parquet” interval (int): Time interval in seconds between price points. Defaults to 3600 (1 hour) refresh_24h (bool): If True, replaces at least 24 hours. Defaults to True</p>
<p>Returns: df (pandas.DataFrame): DataFrame of historical price data</p>
<p>The function: - Date/Time is UTC - For each token, checks if data file exists: - If exists: Loads file and appends any new data since last recorded date - If not exists: Downloads full history starting from 2016 - For hourly data (interval=3600), aligns to hour boundaries*</p>
<hr>
<p><a href="https://github.com/silvaac/token_style/blob/main/token_style/coinbase.py#L332" target="_blank" style="float:right; font-size:smaller">source</a></p>
</section>
<section id="read_all_files" class="level3">
<h3 class="anchored" data-anchor-id="read_all_files">read_all_files</h3>
<blockquote class="blockquote">
<pre><code> read_all_files (folder_path='../data/coinbase', type='csv')</code></pre>
</blockquote>
<p>*Read and combine all files from a folder into a single DataFrame.</p>
<p>Args: folder_path (str): Path to the folder containing the files. Defaults to “../data/coinbase”. type (str): File type to read - either “csv” or “parquet”. Defaults to “csv”.</p>
<p>Returns: pandas.DataFrame: Combined DataFrame containing data from all files in the folder.</p>
<p>Raises: ValueError: If file type is not supported (must be “csv” or “parquet”).*</p>
<hr>
<p><a href="https://github.com/silvaac/token_style/blob/main/token_style/coinbase.py#L360" target="_blank" style="float:right; font-size:smaller">source</a></p>
</section>
<section id="coinbase_price_last_day" class="level3">
<h3 class="anchored" data-anchor-id="coinbase_price_last_day">coinbase_price_last_day</h3>
<blockquote class="blockquote">
<pre><code> coinbase_price_last_day (pair='BTC-USD')</code></pre>
</blockquote>
<p>*Fetch the last day’s price for a given Coinbase token. This fuction is a helper function around coinbase_price_history().</p>
<p>Args: pair (str): Coinbase token pair, e.g., “BTC-USD”. Defaults to “BTC-USD”.</p>
<p>Returns: pandas dataframe: Last 24 hours price data.*</p>
<hr>
<p><a href="https://github.com/silvaac/token_style/blob/main/token_style/coinbase.py#L379" target="_blank" style="float:right; font-size:smaller">source</a></p>
</section>
<section id="binance_format" class="level3">
<h3 class="anchored" data-anchor-id="binance_format">binance_format</h3>
<blockquote class="blockquote">
<pre><code> binance_format (df)</code></pre>
</blockquote>
<p>*Convert coinbase dataframe to binance format.</p>
<p>Args: df (pandas dataframe): Coinbase dataframe.</p>
<p>Returns: pandas dataframe: Binance format dataframe.*</p>
</section>
<section id="examples" class="level2">
<h2 class="anchored" data-anchor-id="examples">Examples</h2>
<p>Load the package</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> token_style.coinbase <span class="im">import</span> <span class="op">*</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>List the available tokens on Coinbase.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>tokens <span class="op">=</span> coinbase_tokens()</span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(tokens)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>            id base_currency quote_currency quote_increment base_increment  \
0     ELA-USDT           ELA           USDT           0.001           0.01   
1     ATOM-BTC          ATOM            BTC       0.0000001            0.1   
2     BAND-USD          BAND            USD           0.001           0.01   
3      ACH-USD           ACH            USD        0.000001            0.1   
4     GHST-USD          GHST            USD           0.001           0.01   
..         ...           ...            ...             ...            ...   
651   XCN-USDT           XCN           USDT         0.00001            0.1   
652    CHZ-EUR           CHZ            EUR          0.0001            0.1   
653   ALGO-USD          ALGO            USD          0.0001            0.1   
654  TRIBE-USD         TRIBE            USD          0.0001            0.1   
655    COW-USD           COW            USD          0.0001            0.1   

    display_name min_market_funds  margin_enabled  post_only  limit_only  \
0       ELA-USDT                1           False      False       False   
1       ATOM-BTC         0.000016           False      False       False   
2       BAND-USD                1           False      False       False   
3        ACH-USD                1           False      False       False   
4       GHST-USD                1           False      False       False   
..           ...              ...             ...        ...         ...   
651     XCN-USDT                1           False      False       False   
652      CHZ-EUR             0.84           False      False       False   
653     ALGO-USD                1           False      False       False   
654    TRIBE-USD                1           False      False       False   
655      COW/USD                1           False      False       False   

     cancel_only    status status_message  trading_disabled  fx_stablecoin  \
0          False  delisted                             True          False   
1          False    online                            False          False   
2          False    online                            False          False   
3          False    online                            False          False   
4          False    online                            False          False   
..           ...       ...            ...               ...            ...   
651        False  delisted                             True          False   
652        False    online                            False          False   
653        False    online                            False          False   
654        False  delisted                             True          False   
655        False    online                            False          False   

    max_slippage_percentage  auction_mode high_bid_limit_percentage  
0                0.03000000         False                            
1                0.03000000         False                            
2                0.03000000         False                            
3                0.03000000         False                            
4                0.03000000         False                            
..                      ...           ...                       ...  
651              0.03000000         False                            
652              0.03000000         False                            
653              0.03000000         False                            
654              0.03000000         False                            
655              0.03000000         False                            

[656 rows x 18 columns]</code></pre>
</div>
</div>
<p>To make it simpler, we can filter the tokens by the quote currency. In this case, we filter for USD.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a>usd_tokens <span class="op">=</span> coinbase_usd_tokens()</span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(usd_tokens)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>            id base_currency quote_currency quote_increment base_increment  \
2     BAND-USD          BAND            USD           0.001           0.01   
3      ACH-USD           ACH            USD        0.000001            0.1   
4     GHST-USD          GHST            USD           0.001           0.01   
7     SAFE-USD          SAFE            USD          0.0001           0.01   
8      AMP-USD           AMP            USD         0.00001              1   
..         ...           ...            ...             ...            ...   
646   ORCA-USD          ORCA            USD          0.0001           0.01   
648    DAI-USD           DAI            USD          0.0001        0.00001   
653   ALGO-USD          ALGO            USD          0.0001            0.1   
654  TRIBE-USD         TRIBE            USD          0.0001            0.1   
655    COW-USD           COW            USD          0.0001            0.1   

    display_name min_market_funds  margin_enabled  post_only  limit_only  \
2       BAND-USD                1           False      False       False   
3        ACH-USD                1           False      False       False   
4       GHST-USD                1           False      False       False   
7       SAFE/USD                1           False      False       False   
8        AMP-USD                1           False      False       False   
..           ...              ...             ...        ...         ...   
646     ORCA-USD                1           False      False       False   
648      DAI-USD                1           False      False       False   
653     ALGO-USD                1           False      False       False   
654    TRIBE-USD                1           False      False       False   
655      COW/USD                1           False      False       False   

     cancel_only    status status_message  trading_disabled  fx_stablecoin  \
2          False    online                            False          False   
3          False    online                            False          False   
4          False    online                            False          False   
7          False    online                            False          False   
8          False    online                            False          False   
..           ...       ...            ...               ...            ...   
646        False    online                            False          False   
648        False    online                            False           True   
653        False    online                            False          False   
654        False  delisted                             True          False   
655        False    online                            False          False   

    max_slippage_percentage  auction_mode high_bid_limit_percentage  
2                0.03000000         False                            
3                0.03000000         False                            
4                0.03000000         False                            
7                0.03000000         False                            
8                0.03000000         False                            
..                      ...           ...                       ...  
646              0.03000000         False                            
648              0.01000000         False                0.03000000  
653              0.03000000         False                            
654              0.03000000         False                            
655              0.03000000         False                            

[317 rows x 18 columns]</code></pre>
</div>
</div>
<p>Download the historical price of BTC-USD for few months at every hour. IMPORTANT: datetime is in UTC!</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a>df <span class="op">=</span> coinbase_price_history()</span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(df)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>                datetime       low      high      open     close       volume  \
0    2024-01-01 00:00:00  42261.58  42543.64  42288.58  42452.66   379.197253   
1    2024-01-01 01:00:00  42415.00  42749.99  42453.83  42594.68   396.201924   
2    2024-01-01 02:00:00  42488.03  42625.68  42594.58  42571.32   227.141166   
3    2024-01-01 03:00:00  42235.00  42581.26  42571.32  42325.11   306.005694   
4    2024-01-01 04:00:00  42200.00  42393.48  42325.10  42389.77   296.233644   
...                  ...       ...       ...       ...       ...          ...   
2900 2024-04-30 20:00:00  59087.36  60082.82  59098.18  59869.99  1655.908771   
2901 2024-04-30 21:00:00  59862.17  60326.56  59865.66  60100.36   615.103455   
2902 2024-04-30 22:00:00  60070.00  60990.48  60100.01  60526.64   727.224395   
2903 2024-04-30 23:00:00  60330.92  60878.39  60529.65  60622.10   346.354179   
2904 2024-05-01 00:00:00  60015.99  60785.49  60621.20  60173.03   499.935743   

         pair  
0     BTC-USD  
1     BTC-USD  
2     BTC-USD  
3     BTC-USD  
4     BTC-USD  
...       ...  
2900  BTC-USD  
2901  BTC-USD  
2902  BTC-USD  
2903  BTC-USD  
2904  BTC-USD  

[2905 rows x 7 columns]</code></pre>
</div>
</div>
<p>Download all history available in coinbase for the tokens saved in folder “../data/coinbase” This process can take a while specially if you are downloading many tokens the first time.</p>
<p>Now read the file from folder “../data/coinbase”:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>df <span class="op">=</span> pd.read_parquet(<span class="st">"../data/coinbase/AAVE-USD.parquet"</span>)</span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(df)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>                 datetime      low     high     open    close    volume  \
0     2020-12-15 17:00:00   87.700   90.400   90.400   88.347  4289.548   
1     2020-12-15 18:00:00   85.620   88.407   88.010   86.000  3802.529   
2     2020-12-15 19:00:00   84.575   89.500   86.105   85.952  2835.124   
3     2020-12-15 20:00:00   84.828   85.952   85.952   85.599   798.670   
4     2020-12-15 21:00:00   84.744   85.893   85.599   85.208   442.464   
...                   ...      ...      ...      ...      ...       ...   
35608 2025-01-07 14:00:00  323.950  333.200  332.900  326.300  2494.366   
35609 2025-01-07 15:00:00  310.900  327.070  326.300  315.770  9817.720   
35610 2025-01-07 16:00:00  313.530  318.250  315.820  314.720  1782.992   
35611 2025-01-07 17:00:00  310.610  315.620  314.780  312.660  3426.675   
35612 2025-01-07 18:00:00  311.970  313.360  312.640  312.950   255.633   

           pair  
0      AAVE-USD  
1      AAVE-USD  
2      AAVE-USD  
3      AAVE-USD  
4      AAVE-USD  
...         ...  
35608  AAVE-USD  
35609  AAVE-USD  
35610  AAVE-USD  
35611  AAVE-USD  
35612  AAVE-USD  

[35613 rows x 7 columns]</code></pre>
</div>
</div>
<p>Full download with no files in the folder takes almost 5 hours. After that, it is much faster (~ 6 minutes). Clearly it will depend on your internet speed and the last time you did the download.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a>coinbase_to_file(<span class="bu">type</span><span class="op">=</span><span class="st">"parquet"</span>) <span class="co"># takes almost 5 hours if there no files in the folder!</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Read all files in the folder into a single dataframe:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a>df <span class="op">=</span> read_all_files(<span class="bu">type</span><span class="op">=</span><span class="st">"parquet"</span>)</span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(df)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>                 datetime       low      high      open     close  \
0     2022-10-11 17:00:00  0.372500  0.510000  0.450000  0.510000   
1     2022-10-11 18:00:00  0.427800  1.284200  0.507800  1.284200   
2     2022-10-11 19:00:00  0.900900  1.464600  1.269000  1.300000   
3     2022-10-11 20:00:00  1.140000  1.382000  1.292100  1.331900   
4     2022-10-11 21:00:00  1.268600  1.649800  1.331900  1.546400   
...                   ...       ...       ...       ...       ...   
54654 2025-01-06 15:00:00  0.547015  0.556522  0.548198  0.554798   
54655 2025-01-06 16:00:00  0.547348  0.557769  0.553998  0.551552   
54656 2025-01-06 17:00:00  0.540932  0.551227  0.550957  0.546732   
54657 2025-01-06 18:00:00  0.543649  0.549062  0.546999  0.546143   
54658 2025-01-06 19:00:00  0.545549  0.550554  0.546045  0.548921   

             volume     pair  
0      2.214310e+05   00-USD  
1      1.261266e+06   00-USD  
2      1.587872e+06   00-USD  
3      6.753579e+05   00-USD  
4      8.359198e+05   00-USD  
...             ...      ...  
54654  3.270357e+05  ZRX-USD  
54655  2.239506e+05  ZRX-USD  
54656  2.097155e+05  ZRX-USD  
54657  1.189937e+05  ZRX-USD  
54658  5.694513e+04  ZRX-USD  

[6827588 rows x 7 columns]</code></pre>
</div>
</div>
<p>Download the last day’s price for AAVE-USD:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="co"># eval: false</span></span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a>coinbase_price_last_day(pair<span class="op">=</span><span class="st">'AAVE-USD'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">datetime</th>
<th data-quarto-table-cell-role="th">low</th>
<th data-quarto-table-cell-role="th">high</th>
<th data-quarto-table-cell-role="th">open</th>
<th data-quarto-table-cell-role="th">close</th>
<th data-quarto-table-cell-role="th">volume</th>
<th data-quarto-table-cell-role="th">pair</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">23</td>
<td>2025-01-06 19:00:00</td>
<td>343.79</td>
<td>347.51</td>
<td>344.22</td>
<td>346.08</td>
<td>696.867</td>
<td>AAVE-USD</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">22</td>
<td>2025-01-06 20:00:00</td>
<td>342.17</td>
<td>346.63</td>
<td>346.19</td>
<td>343.71</td>
<td>1024.476</td>
<td>AAVE-USD</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">21</td>
<td>2025-01-06 21:00:00</td>
<td>340.36</td>
<td>344.01</td>
<td>343.62</td>
<td>340.47</td>
<td>1223.404</td>
<td>AAVE-USD</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">20</td>
<td>2025-01-06 22:00:00</td>
<td>339.69</td>
<td>342.42</td>
<td>340.51</td>
<td>340.01</td>
<td>1577.239</td>
<td>AAVE-USD</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">19</td>
<td>2025-01-06 23:00:00</td>
<td>337.55</td>
<td>341.68</td>
<td>340.01</td>
<td>341.65</td>
<td>1224.641</td>
<td>AAVE-USD</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">18</td>
<td>2025-01-07 00:00:00</td>
<td>338.43</td>
<td>342.70</td>
<td>341.52</td>
<td>338.54</td>
<td>917.205</td>
<td>AAVE-USD</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">17</td>
<td>2025-01-07 01:00:00</td>
<td>337.49</td>
<td>343.00</td>
<td>338.56</td>
<td>342.10</td>
<td>1536.442</td>
<td>AAVE-USD</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">16</td>
<td>2025-01-07 02:00:00</td>
<td>337.82</td>
<td>343.34</td>
<td>342.28</td>
<td>338.23</td>
<td>2047.035</td>
<td>AAVE-USD</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">15</td>
<td>2025-01-07 03:00:00</td>
<td>336.86</td>
<td>339.90</td>
<td>338.42</td>
<td>339.52</td>
<td>1057.940</td>
<td>AAVE-USD</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">14</td>
<td>2025-01-07 04:00:00</td>
<td>337.47</td>
<td>340.03</td>
<td>339.48</td>
<td>337.54</td>
<td>860.860</td>
<td>AAVE-USD</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">13</td>
<td>2025-01-07 05:00:00</td>
<td>337.11</td>
<td>338.98</td>
<td>337.60</td>
<td>338.91</td>
<td>1117.530</td>
<td>AAVE-USD</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">12</td>
<td>2025-01-07 06:00:00</td>
<td>337.59</td>
<td>339.88</td>
<td>338.86</td>
<td>339.29</td>
<td>759.073</td>
<td>AAVE-USD</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">11</td>
<td>2025-01-07 07:00:00</td>
<td>337.02</td>
<td>340.44</td>
<td>339.31</td>
<td>337.63</td>
<td>309.481</td>
<td>AAVE-USD</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">10</td>
<td>2025-01-07 08:00:00</td>
<td>336.80</td>
<td>339.58</td>
<td>337.62</td>
<td>337.44</td>
<td>697.592</td>
<td>AAVE-USD</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">9</td>
<td>2025-01-07 09:00:00</td>
<td>333.31</td>
<td>337.62</td>
<td>337.50</td>
<td>335.13</td>
<td>1350.081</td>
<td>AAVE-USD</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">8</td>
<td>2025-01-07 10:00:00</td>
<td>332.76</td>
<td>335.13</td>
<td>335.13</td>
<td>334.46</td>
<td>462.950</td>
<td>AAVE-USD</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">7</td>
<td>2025-01-07 11:00:00</td>
<td>330.50</td>
<td>335.83</td>
<td>334.43</td>
<td>333.38</td>
<td>1858.256</td>
<td>AAVE-USD</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">6</td>
<td>2025-01-07 12:00:00</td>
<td>330.64</td>
<td>333.90</td>
<td>333.42</td>
<td>332.69</td>
<td>909.802</td>
<td>AAVE-USD</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">5</td>
<td>2025-01-07 13:00:00</td>
<td>331.88</td>
<td>334.83</td>
<td>332.73</td>
<td>332.79</td>
<td>706.971</td>
<td>AAVE-USD</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">4</td>
<td>2025-01-07 14:00:00</td>
<td>323.95</td>
<td>333.20</td>
<td>332.90</td>
<td>326.30</td>
<td>2494.366</td>
<td>AAVE-USD</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">3</td>
<td>2025-01-07 15:00:00</td>
<td>310.90</td>
<td>327.07</td>
<td>326.30</td>
<td>315.77</td>
<td>9817.720</td>
<td>AAVE-USD</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">2</td>
<td>2025-01-07 16:00:00</td>
<td>313.53</td>
<td>318.25</td>
<td>315.82</td>
<td>314.72</td>
<td>1782.992</td>
<td>AAVE-USD</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">1</td>
<td>2025-01-07 17:00:00</td>
<td>310.61</td>
<td>315.62</td>
<td>314.78</td>
<td>312.66</td>
<td>3426.675</td>
<td>AAVE-USD</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">0</td>
<td>2025-01-07 18:00:00</td>
<td>308.59</td>
<td>314.32</td>
<td>312.64</td>
<td>309.27</td>
<td>1807.796</td>
<td>AAVE-USD</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<p>Update the data for AAVE-USD and convert it to Binance format (minor changes in column names and sequence):</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a>df <span class="op">=</span> coinbase_data_update(token_list<span class="op">=</span>[<span class="st">'BTC-USD'</span>])</span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a>binance_df <span class="op">=</span> binance_format(df)</span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(binance_df)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Processing BTC-USD
                           date      Open      High       Low     Close  \
0     2016-01-01 00:00:00+00:00    430.35    431.82    430.35    430.61   
1     2016-01-01 01:00:00+00:00    430.59    430.98    430.00    430.78   
2     2016-01-01 02:00:00+00:00    430.80    430.89    430.50    430.62   
3     2016-01-01 03:00:00+00:00    430.62    432.84    430.31    432.84   
4     2016-01-01 04:00:00+00:00    432.74    437.15    432.72    436.12   
...                         ...       ...       ...       ...       ...   
79049 2025-01-08 15:00:00+00:00  95260.44  96054.04  94595.00  95464.37   
79050 2025-01-08 16:00:00+00:00  95462.47  95469.88  94503.33  94740.36   
79051 2025-01-08 17:00:00+00:00  94740.35  94818.92  92500.00  94007.23   
79052 2025-01-08 18:00:00+00:00  94000.00  95122.22  93724.25  94231.24   
79053 2025-01-08 19:00:00+00:00  94223.92  94779.71  94021.43  94626.76   

            Volume pair  
0       160.179593  btc  
1        92.132315  btc  
2        93.024327  btc  
3       103.811532  btc  
4       363.875951  btc  
...            ...  ...  
79049  1402.803800  btc  
79050   832.014376  btc  
79051  1858.784049  btc  
79052  1166.303885  btc  
79053   289.190190  btc  

[79054 rows x 7 columns]</code></pre>
</div>
</div>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>