[
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "token_style",
    "section": "",
    "text": "This package provides access to some of the data and code used in the paper: Stylized facts in Web3. The current version of the package deals with data from Coinbase. The idea is to add most of the code used in the paper to this package."
  },
  {
    "objectID": "index.html#developer-guide",
    "href": "index.html#developer-guide",
    "title": "token_style",
    "section": "Developer Guide",
    "text": "Developer Guide\nIf you are new to using nbdev here are some useful pointers to get you started.\n\nInstall token_style in Development mode\n# make sure token_style package is installed in development mode\n$ pip install -e .\n\n# make changes under nbs/ directory\n# ...\n\n# compile to have changes apply to token_style\n$ nbdev_prepare"
  },
  {
    "objectID": "index.html#usage",
    "href": "index.html#usage",
    "title": "token_style",
    "section": "Usage",
    "text": "Usage\n\nInstallation\nInstall latest from the GitHub repository:\n$ pip install git+https://github.com/silvaac/token_style.git\n\n\nDocumentation\nDocumentation can be found hosted on this GitHub repository’s pages."
  },
  {
    "objectID": "index.html#how-to-use",
    "href": "index.html#how-to-use",
    "title": "token_style",
    "section": "How to use",
    "text": "How to use\n\nCoinbase\nIn order to download data in bulk from coinbase into the data folder:\n\nfrom token_style.coinbase import *\n# Pull data from coinbase and save it to \"./data/coinbase\" folder. See function for details.\ncoinbase_to_file(token_list=['OP-USD'],type=\"parquet\",all_tokens=False)\n\nProcessing OP-USD\nFile OP-USD is up to date"
  },
  {
    "objectID": "coinbase.html",
    "href": "coinbase.html",
    "title": "Coinbase",
    "section": "",
    "text": "Manages the coinbase data download and processing. It is important to note that the Coinbase API might change from time to time, and the functions might need to be updated. You can find the documentation here: https://docs.cdp.coinbase.com/exchange/reference/exchangerestapi_getproductcandles.\nNotice also that there are limits of what one can download. See the documentation for more details. In particular: https://docs.cdp.coinbase.com/exchange/docs/rest-rate-limits\n** Finally, datetime columns are in UTC. **\nsource"
  },
  {
    "objectID": "coinbase.html#examples",
    "href": "coinbase.html#examples",
    "title": "Coinbase",
    "section": "Examples",
    "text": "Examples\nLoad the package\n\nfrom token_style.coinbase import *\n\n\nList the available tokens on Coinbase\nList the available tokens on Coinbase.\n\ntokens = coinbase_tokens()\nprint(tokens)\n\n              id base_currency quote_currency quote_increment base_increment  \\\n0     BADGER-USD        BADGER            USD            0.01          0.001   \n1       STX-USDT           STX           USDT          0.0001           0.01   \n2      MASK-USDT          MASK           USDT            0.01           0.01   \n3      METIS-USD         METIS            USD            0.01          0.001   \n4       MATH-USD          MATH            USD          0.0001            0.1   \n..           ...           ...            ...             ...            ...   \n651     BUSD-USD          BUSD            USD           0.001           0.01   \n652  MOODENG-USD       MOODENG            USD          0.0001           0.01   \n653     ATOM-GBP          ATOM            GBP           0.001          0.001   \n654      MIR-GBP           MIR            GBP           0.001           0.01   \n655      CHZ-GBP           CHZ            GBP          0.0001            0.1   \n\n    display_name min_market_funds  margin_enabled  post_only  limit_only  \\\n0     BADGER-USD                1           False      False       False   \n1       STX-USDT                1           False      False       False   \n2      MASK-USDT                1           False      False       False   \n3      METIS-USD                1           False      False       False   \n4       MATH-USD                1           False      False       False   \n..           ...              ...             ...        ...         ...   \n651     BUSD-USD                1           False      False       False   \n652  MOODENG/USD                1           False      False       False   \n653     ATOM-GBP             0.72           False      False       False   \n654      MIR-GBP             0.72           False      False       False   \n655      CHZ-GBP             0.72           False      False       False   \n\n     cancel_only    status status_message  trading_disabled  fx_stablecoin  \\\n0          False    online                            False          False   \n1          False    online                            False          False   \n2          False    online                            False          False   \n3          False    online                            False          False   \n4          False    online                            False          False   \n..           ...       ...            ...               ...            ...   \n651        False  delisted                             True           True   \n652        False    online                            False          False   \n653        False    online                            False          False   \n654        False  delisted                             True          False   \n655        False    online                            False          False   \n\n    max_slippage_percentage  auction_mode high_bid_limit_percentage  \n0                0.03000000         False                            \n1                0.03000000         False                            \n2                0.05000000         False                            \n3                0.03000000         False                            \n4                0.03000000         False                            \n..                      ...           ...                       ...  \n651              0.01000000         False                0.03000000  \n652              0.03000000         False                            \n653              0.03000000         False                            \n654              0.03000000         False                            \n655              0.03000000         False                            \n\n[656 rows x 18 columns]\n\n\nTo make it simpler, we can filter the tokens by the quote currency. In this case, we filter for USD.\n\nusd_tokens = coinbase_usd_tokens()\nprint(usd_tokens)\n\n              id base_currency quote_currency quote_increment base_increment  \\\n0     BADGER-USD        BADGER            USD            0.01          0.001   \n3      METIS-USD         METIS            USD            0.01          0.001   \n4       MATH-USD          MATH            USD          0.0001            0.1   \n6       FLOW-USD          FLOW            USD           0.001          0.001   \n10       GRT-USD           GRT            USD          0.0001           0.01   \n..           ...           ...            ...             ...            ...   \n644     BLUR-USD          BLUR            USD          0.0001            0.1   \n646      NCT-USD           NCT            USD         0.00001              1   \n648      JTO-USD           JTO            USD          0.0001            0.1   \n651     BUSD-USD          BUSD            USD           0.001           0.01   \n652  MOODENG-USD       MOODENG            USD          0.0001           0.01   \n\n    display_name min_market_funds  margin_enabled  post_only  limit_only  \\\n0     BADGER-USD                1           False      False       False   \n3      METIS-USD                1           False      False       False   \n4       MATH-USD                1           False      False       False   \n6       FLOW-USD                1           False      False       False   \n10       GRT-USD                1           False      False       False   \n..           ...              ...             ...        ...         ...   \n644     BLUR-USD                1           False      False       False   \n646      NCT-USD                1           False      False       False   \n648      JTO-USD                1           False      False       False   \n651     BUSD-USD                1           False      False       False   \n652  MOODENG/USD                1           False      False       False   \n\n     cancel_only    status status_message  trading_disabled  fx_stablecoin  \\\n0          False    online                            False          False   \n3          False    online                            False          False   \n4          False    online                            False          False   \n6          False    online                            False          False   \n10         False    online                            False          False   \n..           ...       ...            ...               ...            ...   \n644        False    online                            False          False   \n646        False    online                            False          False   \n648        False    online                            False          False   \n651        False  delisted                             True           True   \n652        False    online                            False          False   \n\n    max_slippage_percentage  auction_mode high_bid_limit_percentage  \n0                0.03000000         False                            \n3                0.03000000         False                            \n4                0.03000000         False                            \n6                0.03000000         False                            \n10               0.03000000         False                            \n..                      ...           ...                       ...  \n644              0.03000000         False                            \n646              0.03000000         False                            \n648              0.03000000         False                            \n651              0.01000000         False                0.03000000  \n652              0.03000000         False                            \n\n[317 rows x 18 columns]\n\n\n\n\nData pull examples\nDownload the historical price of BTC-USD for few months at every hour. IMPORTANT: datetime is in UTC!\n\ndf = coinbase_price_history()\nprint(df)\n\n                datetime       low      high      open     close       volume  \\\n0    2024-01-01 00:00:00  42261.58  42543.64  42288.58  42452.66   379.197253   \n1    2024-01-01 01:00:00  42415.00  42749.99  42453.83  42594.68   396.201924   \n2    2024-01-01 02:00:00  42488.03  42625.68  42594.58  42571.32   227.141166   \n3    2024-01-01 03:00:00  42235.00  42581.26  42571.32  42325.11   306.005694   \n4    2024-01-01 04:00:00  42200.00  42393.48  42325.10  42389.77   296.233644   \n...                  ...       ...       ...       ...       ...          ...   \n2900 2024-04-30 20:00:00  59087.36  60082.82  59098.18  59869.99  1655.908771   \n2901 2024-04-30 21:00:00  59862.17  60326.56  59865.66  60100.36   615.103455   \n2902 2024-04-30 22:00:00  60070.00  60990.48  60100.01  60526.64   727.224395   \n2903 2024-04-30 23:00:00  60330.92  60878.39  60529.65  60622.10   346.354179   \n2904 2024-05-01 00:00:00  60015.99  60785.49  60621.20  60173.03   499.935743   \n\n         pair  \n0     BTC-USD  \n1     BTC-USD  \n2     BTC-USD  \n3     BTC-USD  \n4     BTC-USD  \n...       ...  \n2900  BTC-USD  \n2901  BTC-USD  \n2902  BTC-USD  \n2903  BTC-USD  \n2904  BTC-USD  \n\n[2905 rows x 7 columns]\n\n\nDownload all history available in coinbase for the tokens saved in folder “../data/coinbase” This process can take a while specially if you are downloading many tokens the first time.\nFull download with no files in the folder takes almost 5 hours. After that, it is much faster (~ 6 minutes). Clearly it will depend on your internet speed and the last time you did the download.\n\ncoinbase_to_file(type=\"parquet\") # takes almost 5 hours if there no files in the folder!\n\nNow read the file from folder “../data/coinbase”:\n\nimport pandas as pd\ndf = pd.read_parquet(\"../data/coinbase/AAVE-USD.parquet\")\nprint(df)\n\n                 datetime      low     high     open    close     volume  \\\n0     2020-12-15 17:00:00   87.700   90.400   90.400   88.347   4289.548   \n1     2020-12-15 18:00:00   85.620   88.407   88.010   86.000   3802.529   \n2     2020-12-15 19:00:00   84.575   89.500   86.105   85.952   2835.124   \n3     2020-12-15 20:00:00   84.828   85.952   85.952   85.599    798.670   \n4     2020-12-15 21:00:00   84.744   85.893   85.599   85.208    442.464   \n...                   ...      ...      ...      ...      ...        ...   \n35634 2025-01-08 16:00:00  287.740  293.660  293.580  288.160   3457.940   \n35635 2025-01-08 17:00:00  275.570  289.170  288.110  285.080  14845.196   \n35636 2025-01-08 18:00:00  283.350  292.070  285.000  285.850   3771.564   \n35637 2025-01-08 19:00:00  284.590  295.610  286.000  292.540   6487.037   \n35638 2025-01-08 20:00:00  290.140  292.890  292.580  290.160    387.139   \n\n           pair  \n0      AAVE-USD  \n1      AAVE-USD  \n2      AAVE-USD  \n3      AAVE-USD  \n4      AAVE-USD  \n...         ...  \n35634  AAVE-USD  \n35635  AAVE-USD  \n35636  AAVE-USD  \n35637  AAVE-USD  \n35638  AAVE-USD  \n\n[35639 rows x 7 columns]\n\n\nRead all files in the folder into a single dataframe:\n\ndf = read_all_files(type=\"parquet\")\nprint(df)\n\n                 datetime       low      high      open     close  \\\n0     2022-10-11 17:00:00  0.372500  0.510000  0.450000  0.510000   \n1     2022-10-11 18:00:00  0.427800  1.284200  0.507800  1.284200   \n2     2022-10-11 19:00:00  0.900900  1.464600  1.269000  1.300000   \n3     2022-10-11 20:00:00  1.140000  1.382000  1.292100  1.331900   \n4     2022-10-11 21:00:00  1.268600  1.649800  1.331900  1.546400   \n...                   ...       ...       ...       ...       ...   \n54703 2025-01-08 16:00:00  0.474674  0.486000  0.476924  0.474674   \n54704 2025-01-08 17:00:00  0.462158  0.483032  0.477000  0.482772   \n54705 2025-01-08 18:00:00  0.482728  0.499450  0.483302  0.490197   \n54706 2025-01-08 19:00:00  0.488000  0.497000  0.491379  0.495499   \n54707 2025-01-08 20:00:00  0.495034  0.498653  0.495034  0.498653   \n\n             volume     pair  \n0      2.214310e+05   00-USD  \n1      1.261266e+06   00-USD  \n2      1.587872e+06   00-USD  \n3      6.753579e+05   00-USD  \n4      8.359198e+05   00-USD  \n...             ...      ...  \n54703  1.061651e+05  ZRX-USD  \n54704  1.756147e+05  ZRX-USD  \n54705  1.852007e+05  ZRX-USD  \n54706  1.024419e+05  ZRX-USD  \n54707  3.496561e+03  ZRX-USD  \n\n[6840583 rows x 7 columns]\n\n\nDownload the last day’s price for AAVE-USD:\n\n# eval: false\ncoinbase_price_last_day(pair='AAVE-USD')\n\n\n\n\n\n\n\n\ndatetime\nlow\nhigh\nopen\nclose\nvolume\npair\n\n\n\n\n23\n2025-01-07 21:00:00\n306.56\n311.82\n309.11\n306.56\n1740.036\nAAVE-USD\n\n\n22\n2025-01-07 22:00:00\n305.27\n309.60\n306.54\n308.92\n1125.992\nAAVE-USD\n\n\n21\n2025-01-07 23:00:00\n306.26\n309.12\n308.67\n306.86\n1695.001\nAAVE-USD\n\n\n20\n2025-01-08 00:00:00\n306.35\n312.50\n306.84\n311.26\n2310.368\nAAVE-USD\n\n\n19\n2025-01-08 01:00:00\n305.95\n311.26\n311.22\n308.17\n1416.847\nAAVE-USD\n\n\n18\n2025-01-08 02:00:00\n305.73\n308.94\n308.15\n305.78\n1858.829\nAAVE-USD\n\n\n17\n2025-01-08 03:00:00\n301.10\n306.64\n305.78\n302.33\n6215.529\nAAVE-USD\n\n\n16\n2025-01-08 04:00:00\n300.09\n304.24\n302.38\n300.76\n6087.466\nAAVE-USD\n\n\n15\n2025-01-08 05:00:00\n299.01\n302.47\n300.83\n299.47\n3269.227\nAAVE-USD\n\n\n14\n2025-01-08 06:00:00\n292.00\n301.32\n299.51\n292.03\n4360.066\nAAVE-USD\n\n\n13\n2025-01-08 07:00:00\n291.91\n299.10\n291.96\n298.59\n1640.367\nAAVE-USD\n\n\n12\n2025-01-08 08:00:00\n298.27\n302.30\n298.47\n299.74\n1300.077\nAAVE-USD\n\n\n11\n2025-01-08 09:00:00\n296.46\n299.81\n299.61\n296.64\n1083.719\nAAVE-USD\n\n\n10\n2025-01-08 10:00:00\n296.72\n299.76\n296.73\n298.80\n1035.895\nAAVE-USD\n\n\n9\n2025-01-08 11:00:00\n294.19\n299.05\n298.88\n295.38\n3160.681\nAAVE-USD\n\n\n8\n2025-01-08 12:00:00\n293.53\n297.75\n295.53\n293.75\n1296.402\nAAVE-USD\n\n\n7\n2025-01-08 13:00:00\n293.84\n297.43\n293.84\n294.08\n2476.275\nAAVE-USD\n\n\n6\n2025-01-08 14:00:00\n293.95\n298.23\n294.05\n296.67\n1422.807\nAAVE-USD\n\n\n5\n2025-01-08 15:00:00\n291.72\n299.07\n296.47\n293.62\n3518.873\nAAVE-USD\n\n\n4\n2025-01-08 16:00:00\n287.74\n293.66\n293.58\n288.16\n3457.940\nAAVE-USD\n\n\n3\n2025-01-08 17:00:00\n275.57\n289.17\n288.11\n285.08\n14845.196\nAAVE-USD\n\n\n2\n2025-01-08 18:00:00\n283.35\n292.07\n285.00\n285.85\n3771.564\nAAVE-USD\n\n\n1\n2025-01-08 19:00:00\n284.59\n295.61\n286.00\n292.54\n6487.037\nAAVE-USD\n\n\n0\n2025-01-08 20:00:00\n289.44\n292.89\n292.58\n291.69\n837.063\nAAVE-USD\n\n\n\n\n\n\n\nUpdate the data for AAVE-USD and convert it to Binance format (minor changes in column names and sequence):\n\ndf = coinbase_data_update(token_list=['BTC-USD'])\nbinance_df = binance_format(df)\nprint(binance_df)\n\nProcessing BTC-USD\n                           date      Open      High       Low     Close  \\\n0     2016-01-01 00:00:00+00:00    430.35    431.82    430.35    430.61   \n1     2016-01-01 01:00:00+00:00    430.59    430.98    430.00    430.78   \n2     2016-01-01 02:00:00+00:00    430.80    430.89    430.50    430.62   \n3     2016-01-01 03:00:00+00:00    430.62    432.84    430.31    432.84   \n4     2016-01-01 04:00:00+00:00    432.74    437.15    432.72    436.12   \n...                         ...       ...       ...       ...       ...   \n79050 2025-01-08 16:00:00+00:00  95462.47  95469.88  94503.33  94740.36   \n79051 2025-01-08 17:00:00+00:00  94740.35  94818.92  92500.00  94007.23   \n79052 2025-01-08 18:00:00+00:00  94000.00  95122.22  93724.25  94231.24   \n79053 2025-01-08 19:00:00+00:00  94223.92  94830.75  94009.81  94213.57   \n79054 2025-01-08 20:00:00+00:00  94213.57  94379.54  93713.54  93929.24   \n\n            Volume pair  \n0       160.179593  btc  \n1        92.132315  btc  \n2        93.024327  btc  \n3       103.811532  btc  \n4       363.875951  btc  \n...            ...  ...  \n79050   832.014376  btc  \n79051  1858.784049  btc  \n79052  1166.303885  btc  \n79053   841.092918  btc  \n79054   445.560363  btc  \n\n[79055 rows x 7 columns]"
  }
]