[
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "token_style",
    "section": "",
    "text": "This package provides access to some of the data and code used in the paper: Stylized facts in Web3. The current version of the package deals with data from Coinbase. The idea is to add most of the code used in the paper to this package."
  },
  {
    "objectID": "index.html#developer-guide",
    "href": "index.html#developer-guide",
    "title": "token_style",
    "section": "Developer Guide",
    "text": "Developer Guide\nIf you are new to using nbdev here are some useful pointers to get you started.\n\nInstall token_style in Development mode\n# make sure token_style package is installed in development mode\n$ pip install -e .\n\n# make changes under nbs/ directory\n# ...\n\n# compile to have changes apply to token_style\n$ nbdev_prepare"
  },
  {
    "objectID": "index.html#usage",
    "href": "index.html#usage",
    "title": "token_style",
    "section": "Usage",
    "text": "Usage\n\nInstallation\nInstall latest from the GitHub repository:\n$ pip install git+https://github.com/silvaac/token_style.git\n\n\nDocumentation\nDocumentation can be found hosted on this GitHub repository’s pages."
  },
  {
    "objectID": "index.html#how-to-use",
    "href": "index.html#how-to-use",
    "title": "token_style",
    "section": "How to use",
    "text": "How to use\n\nCoinbase\nIn order to download data in bulk from coinbase into the data folder:\n\nfrom token_style.coinbase import *\n# Pull data from coinbase and save it to \"./data/coinbase\" folder. See function for details.\ncoinbase_to_file(token_list=['OP-USD'],type=\"parquet\",all_tokens=False)\n\nProcessing OP-USD\nFile OP-USD is up to date"
  },
  {
    "objectID": "coinbase.html",
    "href": "coinbase.html",
    "title": "Coinbase",
    "section": "",
    "text": "Manages the coinbase data download and processing. It is important to note that the Coinbase API might change from time to time, and the functions might need to be updated. You can find the documentation here: https://docs.cdp.coinbase.com/exchange/reference/exchangerestapi_getproductcandles.\nNotice also that there are limits of what one can download. See the documentation for more details. In particular: https://docs.cdp.coinbase.com/exchange/docs/rest-rate-limits\n** Finally, datetime columns are in UTC. **\nsource"
  },
  {
    "objectID": "coinbase.html#examples",
    "href": "coinbase.html#examples",
    "title": "Coinbase",
    "section": "Examples",
    "text": "Examples\nLoad the package\n\nfrom token_style.coinbase import *\n\n\nList the available tokens on Coinbase\nList the available tokens on Coinbase.\n\ntokens = coinbase_tokens()\nprint(tokens)\n\n            id base_currency quote_currency quote_increment base_increment  \\\n0      APE-EUR           APE            EUR           0.001           0.01   \n1      MKR-USD           MKR            USD            0.01       0.000001   \n2      XLM-BTC           XLM            BTC      0.00000001              1   \n3     USDC-GBP          USDC            GBP          0.0001           0.01   \n4    ARPA-USDT          ARPA           USDT          0.0001            0.1   \n..         ...           ...            ...             ...            ...   \n653    ICP-EUR           ICP            EUR           0.001         0.0001   \n654  EURC-USDC          EURC           USDC          0.0001              1   \n655    LRC-BTC           LRC            BTC      0.00000001              1   \n656   VARA-USD          VARA            USD         0.00001              1   \n657   DIA-USDT           DIA           USDT         0.00001           0.01   \n\n    display_name min_market_funds  margin_enabled  post_only  limit_only  \\\n0        APE-EUR                1           False      False       False   \n1        MKR-USD                1           False      False       False   \n2        XLM-BTC         0.000016           False      False       False   \n3       USDC-GBP             0.72           False      False        True   \n4      ARPA-USDT                1           False      False       False   \n..           ...              ...             ...        ...         ...   \n653      ICP-EUR             0.84           False      False       False   \n654    EURC/USDC                1           False      False        True   \n655      LRC-BTC         0.000016           False      False       False   \n656     VARA-USD                1           False      False       False   \n657     DIA-USDT                1           False      False       False   \n\n     cancel_only    status status_message  trading_disabled  fx_stablecoin  \\\n0          False    online                            False          False   \n1          False    online                            False          False   \n2          False    online                            False          False   \n3          False    online                            False           True   \n4          False  delisted                             True          False   \n..           ...       ...            ...               ...            ...   \n653        False    online                            False          False   \n654        False    online                            False           True   \n655        False    online                            False          False   \n656        False    online                            False          False   \n657        False  delisted                             True          False   \n\n    max_slippage_percentage  auction_mode high_bid_limit_percentage  \n0                0.03000000         False                            \n1                0.03000000         False                            \n2                0.03000000         False                            \n3                0.01000000         False                0.03000000  \n4                0.03000000         False                            \n..                      ...           ...                       ...  \n653              0.03000000         False                            \n654              0.01000000         False                0.03000000  \n655              0.03000000         False                            \n656              0.03000000         False                            \n657              0.03000000         False                            \n\n[658 rows x 18 columns]\n\n\nTo make it simpler, we can filter the tokens by the quote currency. In this case, we filter for USD.\n\nusd_tokens = coinbase_usd_tokens()\nprint(usd_tokens)\n\n             id base_currency quote_currency quote_increment base_increment  \\\n1       MKR-USD           MKR            USD            0.01       0.000001   \n7      OSMO-USD          OSMO            USD          0.0001           0.01   \n8       HNT-USD           HNT            USD           0.001           0.01   \n9       RAI-USD           RAI            USD            0.01           0.01   \n10      VET-USD           VET            USD         0.00001              1   \n..          ...           ...            ...             ...            ...   \n647     OGN-USD           OGN            USD         0.00001           0.01   \n649      OP-USD            OP            USD           0.001           0.01   \n650  BADGER-USD        BADGER            USD            0.01          0.001   \n651    PEPE-USD          PEPE            USD      0.00000001              1   \n656    VARA-USD          VARA            USD         0.00001              1   \n\n    display_name min_market_funds  margin_enabled  post_only  limit_only  \\\n1        MKR-USD                1           False      False       False   \n7       OSMO-USD                1           False      False       False   \n8        HNT-USD                1           False      False       False   \n9        RAI-USD                1           False      False       False   \n10       VET-USD                1           False      False       False   \n..           ...              ...             ...        ...         ...   \n647      OGN-USD                1           False      False       False   \n649       OP-USD                1           False      False       False   \n650   BADGER-USD                1           False      False       False   \n651     PEPE/USD                1           False      False       False   \n656     VARA-USD                1           False      False       False   \n\n     cancel_only    status status_message  trading_disabled  fx_stablecoin  \\\n1          False    online                            False          False   \n7          False    online                            False          False   \n8          False    online                            False          False   \n9          False  delisted                             True          False   \n10         False    online                            False          False   \n..           ...       ...            ...               ...            ...   \n647        False    online                            False          False   \n649        False    online                            False          False   \n650        False    online                            False          False   \n651        False    online                            False          False   \n656        False    online                            False          False   \n\n    max_slippage_percentage  auction_mode high_bid_limit_percentage  \n1                0.03000000         False                            \n7                0.03000000         False                            \n8                0.03000000         False                            \n9                0.03000000         False                            \n10               0.03000000         False                            \n..                      ...           ...                       ...  \n647              0.03000000         False                            \n649              0.03000000         False                            \n650              0.03000000         False                            \n651              0.03000000         False                            \n656              0.03000000         False                            \n\n[319 rows x 18 columns]\n\n\n\n\nData pull examples\nDownload the historical price of BTC-USD for few months at every hour. IMPORTANT: datetime is in UTC!\n\ndf = coinbase_price_history()\nprint(df)\n\n                datetime       low      high      open     close       volume  \\\n0    2024-01-01 00:00:00  42261.58  42543.64  42288.58  42452.66   379.197253   \n1    2024-01-01 01:00:00  42415.00  42749.99  42453.83  42594.68   396.201924   \n2    2024-01-01 02:00:00  42488.03  42625.68  42594.58  42571.32   227.141166   \n3    2024-01-01 03:00:00  42235.00  42581.26  42571.32  42325.11   306.005694   \n4    2024-01-01 04:00:00  42200.00  42393.48  42325.10  42389.77   296.233644   \n...                  ...       ...       ...       ...       ...          ...   \n2900 2024-04-30 20:00:00  59087.36  60082.82  59098.18  59869.99  1655.908771   \n2901 2024-04-30 21:00:00  59862.17  60326.56  59865.66  60100.36   615.103455   \n2902 2024-04-30 22:00:00  60070.00  60990.48  60100.01  60526.64   727.224395   \n2903 2024-04-30 23:00:00  60330.92  60878.39  60529.65  60622.10   346.354179   \n2904 2024-05-01 00:00:00  60015.99  60785.49  60621.20  60173.03   499.935743   \n\n         pair  \n0     BTC-USD  \n1     BTC-USD  \n2     BTC-USD  \n3     BTC-USD  \n4     BTC-USD  \n...       ...  \n2900  BTC-USD  \n2901  BTC-USD  \n2902  BTC-USD  \n2903  BTC-USD  \n2904  BTC-USD  \n\n[2905 rows x 7 columns]\n\n\nDownload all history available in coinbase for the tokens saved in folder “../data/coinbase” This process can take a while specially if you are downloading many tokens the first time.\nFull download with no files in the folder takes almost 5 hours. After that, it is much faster (~ 6 minutes). Clearly it will depend on your internet speed and the last time you did the download.\n\ncoinbase_to_file(type=\"parquet\") # takes almost 5 hours if there no files in the folder!\n\nNow read the file from folder “../data/coinbase”:\n\nimport pandas as pd\ndf = pd.read_parquet(\"../data/coinbase/AAVE-USD.parquet\")\nprint(df)\n\n                 datetime      low     high     open    close    volume  \\\n0     2020-12-15 17:00:00   87.700   90.400   90.400   88.347  4289.548   \n1     2020-12-15 18:00:00   85.620   88.407   88.010   86.000  3802.529   \n2     2020-12-15 19:00:00   84.575   89.500   86.105   85.952  2835.124   \n3     2020-12-15 20:00:00   84.828   85.952   85.952   85.599   798.670   \n4     2020-12-15 21:00:00   84.744   85.893   85.599   85.208   442.464   \n...                   ...      ...      ...      ...      ...       ...   \n35942 2025-01-21 12:00:00  357.540  371.480  362.100  366.670  8248.061   \n35943 2025-01-21 13:00:00  359.410  367.930  366.650  365.500  6770.685   \n35944 2025-01-21 14:00:00  358.290  366.990  365.610  359.610  5676.846   \n35945 2025-01-21 15:00:00  354.590  362.880  359.510  357.290  5677.313   \n35946 2025-01-21 16:00:00  354.870  362.290  357.310  357.700  4360.988   \n\n           pair  \n0      AAVE-USD  \n1      AAVE-USD  \n2      AAVE-USD  \n3      AAVE-USD  \n4      AAVE-USD  \n...         ...  \n35942  AAVE-USD  \n35943  AAVE-USD  \n35944  AAVE-USD  \n35945  AAVE-USD  \n35946  AAVE-USD  \n\n[35947 rows x 7 columns]\n\n\nRead all files in the folder into a single dataframe:\n\ndf = read_all_files(type=\"parquet\")\nprint(df)\n\n                 datetime       low      high      open     close  \\\n0     2022-10-11 17:00:00  0.372500  0.510000  0.450000  0.510000   \n1     2022-10-11 18:00:00  0.427800  1.284200  0.507800  1.284200   \n2     2022-10-11 19:00:00  0.900900  1.464600  1.269000  1.300000   \n3     2022-10-11 20:00:00  1.140000  1.382000  1.292100  1.331900   \n4     2022-10-11 21:00:00  1.268600  1.649800  1.331900  1.546400   \n...                   ...       ...       ...       ...       ...   \n55011 2025-01-21 12:00:00  0.464885  0.474850  0.468067  0.471385   \n55012 2025-01-21 13:00:00  0.465000  0.473298  0.471186  0.468332   \n55013 2025-01-21 14:00:00  0.461907  0.473863  0.468567  0.463435   \n55014 2025-01-21 15:00:00  0.460000  0.467998  0.464733  0.466155   \n55015 2025-01-21 16:00:00  0.466431  0.478793  0.466431  0.474741   \n\n             volume     pair  \n0      2.214310e+05   00-USD  \n1      1.261266e+06   00-USD  \n2      1.587872e+06   00-USD  \n3      6.753579e+05   00-USD  \n4      8.359198e+05   00-USD  \n...             ...      ...  \n55011  2.552343e+05  ZRX-USD  \n55012  3.205124e+04  ZRX-USD  \n55013  4.986324e+04  ZRX-USD  \n55014  5.256622e+04  ZRX-USD  \n55015  6.143745e+04  ZRX-USD  \n\n[6922279 rows x 7 columns]\n\n\nDownload the last day’s price for AAVE-USD:\n\n# eval: false\ncoinbase_price_last_day(pair='AAVE-USD')\n\n\n\n\n\n\n\n\ndatetime\nlow\nhigh\nopen\nclose\nvolume\npair\n\n\n\n\n23\n2025-01-20 17:00:00\n318.38\n351.19\n350.77\n332.04\n17009.535\nAAVE-USD\n\n\n22\n2025-01-20 18:00:00\n330.13\n363.00\n332.06\n348.50\n14342.571\nAAVE-USD\n\n\n21\n2025-01-20 19:00:00\n345.07\n364.16\n348.41\n354.96\n16268.851\nAAVE-USD\n\n\n20\n2025-01-20 20:00:00\n348.00\n355.80\n354.95\n348.55\n5404.532\nAAVE-USD\n\n\n19\n2025-01-20 21:00:00\n340.42\n352.36\n348.39\n341.27\n5889.728\nAAVE-USD\n\n\n18\n2025-01-20 22:00:00\n337.83\n348.73\n341.27\n348.57\n3904.477\nAAVE-USD\n\n\n17\n2025-01-20 23:00:00\n334.91\n348.98\n348.65\n337.09\n9045.903\nAAVE-USD\n\n\n16\n2025-01-21 00:00:00\n327.27\n339.04\n337.07\n327.87\n9903.319\nAAVE-USD\n\n\n15\n2025-01-21 01:00:00\n327.23\n339.84\n327.96\n337.34\n47457.843\nAAVE-USD\n\n\n14\n2025-01-21 02:00:00\n337.00\n350.57\n337.21\n346.02\n23115.761\nAAVE-USD\n\n\n13\n2025-01-21 03:00:00\n340.55\n347.55\n345.93\n345.53\n5440.116\nAAVE-USD\n\n\n12\n2025-01-21 04:00:00\n332.82\n345.80\n345.80\n340.28\n4284.122\nAAVE-USD\n\n\n11\n2025-01-21 05:00:00\n332.54\n341.14\n340.24\n336.69\n3109.911\nAAVE-USD\n\n\n10\n2025-01-21 06:00:00\n334.67\n344.57\n336.69\n342.67\n4486.771\nAAVE-USD\n\n\n9\n2025-01-21 07:00:00\n339.26\n344.16\n342.49\n341.09\n3260.287\nAAVE-USD\n\n\n8\n2025-01-21 08:00:00\n337.90\n344.62\n341.05\n343.19\n3464.737\nAAVE-USD\n\n\n7\n2025-01-21 09:00:00\n342.07\n355.21\n342.78\n355.21\n7129.535\nAAVE-USD\n\n\n6\n2025-01-21 10:00:00\n349.29\n369.55\n354.95\n365.87\n15192.819\nAAVE-USD\n\n\n5\n2025-01-21 11:00:00\n357.10\n369.21\n365.93\n362.00\n6683.760\nAAVE-USD\n\n\n4\n2025-01-21 12:00:00\n357.54\n371.48\n362.10\n366.67\n8248.061\nAAVE-USD\n\n\n3\n2025-01-21 13:00:00\n359.41\n367.93\n366.65\n365.50\n6770.685\nAAVE-USD\n\n\n2\n2025-01-21 14:00:00\n358.29\n366.99\n365.61\n359.61\n5676.846\nAAVE-USD\n\n\n1\n2025-01-21 15:00:00\n354.59\n362.88\n359.51\n357.29\n5677.313\nAAVE-USD\n\n\n0\n2025-01-21 16:00:00\n354.87\n362.29\n357.31\n358.40\n4514.212\nAAVE-USD\n\n\n\n\n\n\n\nUpdate the data for AAVE-USD and convert it to Binance format (minor changes in column names and sequence):\n\ndf = coinbase_data_update(token='BTC-USD')\nbinance_df = binance_format(df)\nprint(binance_df)\n\nProcessing BTC-USD\n                           date       Open       High        Low      Close  \\\n0     2016-01-01 00:00:00+00:00     430.35     431.82     430.35     430.61   \n1     2016-01-01 01:00:00+00:00     430.59     430.98     430.00     430.78   \n2     2016-01-01 02:00:00+00:00     430.80     430.89     430.50     430.62   \n3     2016-01-01 03:00:00+00:00     430.62     432.84     430.31     432.84   \n4     2016-01-01 04:00:00+00:00     432.74     437.15     432.72     436.12   \n...                         ...        ...        ...        ...        ...   \n79358 2025-01-21 12:00:00+00:00  103651.97  104631.99  103500.01  104405.22   \n79359 2025-01-21 13:00:00+00:00  104426.42  104894.98  104055.31  104370.76   \n79360 2025-01-21 14:00:00+00:00  104363.83  105236.04  102900.00  103178.25   \n79361 2025-01-21 15:00:00+00:00  103168.01  104016.75  102688.00  103854.59   \n79362 2025-01-21 16:00:00+00:00  103860.03  106500.00  103729.79  105195.47   \n\n            Volume pair  \n0       160.179593  btc  \n1        92.132315  btc  \n2        93.024327  btc  \n3       103.811532  btc  \n4       363.875951  btc  \n...            ...  ...  \n79358   490.800848  btc  \n79359   483.549109  btc  \n79360  1192.881482  btc  \n79361   968.173608  btc  \n79362  2133.184076  btc  \n\n[79363 rows x 7 columns]\n\n\n\nimport pandas as pd\ndf = coinbase_data_update(token = 'BTC-USD')\nbinance_df1 = binance_format(df)\ndf = coinbase_data_update(token = 'ETH-USD')\nbinance_df2 = binance_format(df)\ndh = pd.concat([binance_df1, binance_df2])\n#dh.to_feather(\"coinHist.fdr\")\n\nProcessing BTC-USD\nProcessing ETH-USD"
  }
]